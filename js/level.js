function level_t(simulation)
{
	var canvas_width=simulation.canvas.width;
	var canvas_height=simulation.canvas.height;
	simulation.clear_color='#5e5e5e';

	this.tile_maker=new tile_maker_t('img/tiles.png',16,16);
	this.tile_maker.load('[[{"tpos":{"x":-1,"y":-1},"gpos":{"x":0,"y":0}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":1,"y":0}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":2,"y":0}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":3,"y":0}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":4,"y":0}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":5,"y":0}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":6,"y":0}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":7,"y":0}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":8,"y":0}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":9,"y":0}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":10,"y":0}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":11,"y":0}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":12,"y":0}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":13,"y":0}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":14,"y":0}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":15,"y":0}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":16,"y":0}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":17,"y":0}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":18,"y":0}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":19,"y":0}}],[{"tpos":{"x":-1,"y":-1},"gpos":{"x":0,"y":1}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":1,"y":1}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":2,"y":1}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":3,"y":1}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":4,"y":1}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":5,"y":1}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":6,"y":1}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":7,"y":1}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":8,"y":1}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":9,"y":1}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":10,"y":1}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":11,"y":1}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":12,"y":1}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":13,"y":1}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":14,"y":1}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":15,"y":1}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":16,"y":1}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":17,"y":1}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":18,"y":1}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":19,"y":1}}],[{"tpos":{"x":-1,"y":-1},"gpos":{"x":0,"y":2}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":1,"y":2}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":2,"y":2}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":3,"y":2}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":4,"y":2}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":5,"y":2}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":6,"y":2}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":7,"y":2}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":8,"y":2}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":9,"y":2}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":10,"y":2}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":11,"y":2}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":12,"y":2}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":13,"y":2}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":14,"y":2}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":15,"y":2}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":16,"y":2}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":17,"y":2}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":18,"y":2}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":19,"y":2}}],[{"tpos":{"x":-1,"y":-1},"gpos":{"x":0,"y":3}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":1,"y":3}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":2,"y":3}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":3,"y":3}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":4,"y":3}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":5,"y":3}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":6,"y":3}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":7,"y":3}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":8,"y":3}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":9,"y":3}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":10,"y":3}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":11,"y":3}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":12,"y":3}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":13,"y":3}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":14,"y":3}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":15,"y":3}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":16,"y":3}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":17,"y":3}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":18,"y":3}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":19,"y":3}}],[{"tpos":{"x":-1,"y":-1},"gpos":{"x":0,"y":4}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":1,"y":4}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":2,"y":4}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":3,"y":4}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":4,"y":4}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":5,"y":4}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":6,"y":4}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":7,"y":4}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":8,"y":4}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":9,"y":4}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":10,"y":4}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":11,"y":4}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":12,"y":4}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":13,"y":4}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":14,"y":4}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":15,"y":4}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":16,"y":4}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":17,"y":4}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":18,"y":4}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":19,"y":4}}],[{"tpos":{"x":-1,"y":-1},"gpos":{"x":0,"y":5}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":1,"y":5}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":2,"y":5}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":3,"y":5}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":4,"y":5}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":5,"y":5}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":6,"y":5}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":7,"y":5}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":8,"y":5}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":9,"y":5}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":10,"y":5}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":11,"y":5}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":12,"y":5}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":13,"y":5}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":14,"y":5}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":15,"y":5}},{"tpos":{"x":7,"y":2},"gpos":{"x":16,"y":5}},{"tpos":{"x":8,"y":2},"gpos":{"x":17,"y":5}},{"tpos":{"x":8,"y":2},"gpos":{"x":18,"y":5}},{"tpos":{"x":11,"y":2},"gpos":{"x":19,"y":5}}],[{"tpos":{"x":-1,"y":-1},"gpos":{"x":0,"y":6}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":1,"y":6}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":2,"y":6}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":3,"y":6}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":4,"y":6}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":5,"y":6}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":6,"y":6}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":7,"y":6}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":8,"y":6}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":9,"y":6}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":10,"y":6}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":11,"y":6}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":12,"y":6}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":13,"y":6}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":14,"y":6}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":15,"y":6}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":16,"y":6}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":17,"y":6}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":18,"y":6}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":19,"y":6}}],[{"tpos":{"x":-1,"y":-1},"gpos":{"x":0,"y":7}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":1,"y":7}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":2,"y":7}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":3,"y":7}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":4,"y":7}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":5,"y":7}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":6,"y":7}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":7,"y":7}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":8,"y":7}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":9,"y":7}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":10,"y":7}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":11,"y":7}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":12,"y":7}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":13,"y":7}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":14,"y":7}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":15,"y":7}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":16,"y":7}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":17,"y":7}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":18,"y":7}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":19,"y":7}}],[{"tpos":{"x":-1,"y":-1},"gpos":{"x":0,"y":8}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":1,"y":8}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":2,"y":8}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":3,"y":8}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":4,"y":8}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":5,"y":8}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":6,"y":8}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":7,"y":8}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":8,"y":8}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":9,"y":8}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":10,"y":8}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":11,"y":8}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":12,"y":8}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":13,"y":8}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":14,"y":8}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":15,"y":8}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":16,"y":8}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":17,"y":8}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":18,"y":8}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":19,"y":8}}],[{"tpos":{"x":1,"y":1},"gpos":{"x":0,"y":9}},{"tpos":{"x":3,"y":1},"gpos":{"x":1,"y":9}},{"tpos":{"x":3,"y":1},"gpos":{"x":2,"y":9}},{"tpos":{"x":3,"y":1},"gpos":{"x":3,"y":9}},{"tpos":{"x":3,"y":1},"gpos":{"x":4,"y":9}},{"tpos":{"x":3,"y":1},"gpos":{"x":5,"y":9}},{"tpos":{"x":5,"y":1},"gpos":{"x":6,"y":9}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":7,"y":9}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":8,"y":9}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":9,"y":9}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":10,"y":9}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":11,"y":9}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":12,"y":9}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":13,"y":9}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":14,"y":9}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":15,"y":9}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":16,"y":9}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":17,"y":9}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":18,"y":9}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":19,"y":9}}],[{"tpos":{"x":1,"y":2},"gpos":{"x":0,"y":10}},{"tpos":{"x":3,"y":3},"gpos":{"x":1,"y":10}},{"tpos":{"x":3,"y":3},"gpos":{"x":2,"y":10}},{"tpos":{"x":3,"y":3},"gpos":{"x":3,"y":10}},{"tpos":{"x":3,"y":3},"gpos":{"x":4,"y":10}},{"tpos":{"x":3,"y":3},"gpos":{"x":5,"y":10}},{"tpos":{"x":5,"y":3},"gpos":{"x":6,"y":10}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":7,"y":10}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":8,"y":10}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":9,"y":10}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":10,"y":10}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":11,"y":10}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":12,"y":10}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":13,"y":10}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":14,"y":10}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":15,"y":10}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":16,"y":10}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":17,"y":10}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":18,"y":10}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":19,"y":10}}],[{"tpos":{"x":1,"y":2},"gpos":{"x":0,"y":11}},{"tpos":{"x":3,"y":3},"gpos":{"x":1,"y":11}},{"tpos":{"x":3,"y":3},"gpos":{"x":2,"y":11}},{"tpos":{"x":3,"y":3},"gpos":{"x":3,"y":11}},{"tpos":{"x":3,"y":3},"gpos":{"x":4,"y":11}},{"tpos":{"x":3,"y":3},"gpos":{"x":5,"y":11}},{"tpos":{"x":5,"y":3},"gpos":{"x":6,"y":11}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":7,"y":11}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":8,"y":11}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":9,"y":11}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":10,"y":11}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":11,"y":11}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":12,"y":11}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":13,"y":11}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":14,"y":11}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":15,"y":11}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":16,"y":11}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":17,"y":11}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":18,"y":11}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":19,"y":11}}],[{"tpos":{"x":1,"y":2},"gpos":{"x":0,"y":12}},{"tpos":{"x":3,"y":3},"gpos":{"x":1,"y":12}},{"tpos":{"x":3,"y":3},"gpos":{"x":2,"y":12}},{"tpos":{"x":3,"y":3},"gpos":{"x":3,"y":12}},{"tpos":{"x":3,"y":3},"gpos":{"x":4,"y":12}},{"tpos":{"x":3,"y":3},"gpos":{"x":5,"y":12}},{"tpos":{"x":5,"y":3},"gpos":{"x":6,"y":12}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":7,"y":12}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":8,"y":12}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":9,"y":12}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":10,"y":12}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":11,"y":12}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":12,"y":12}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":13,"y":12}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":14,"y":12}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":15,"y":12}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":16,"y":12}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":17,"y":12}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":18,"y":12}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":19,"y":12}}],[{"tpos":{"x":1,"y":2},"gpos":{"x":0,"y":13}},{"tpos":{"x":3,"y":3},"gpos":{"x":1,"y":13}},{"tpos":{"x":3,"y":3},"gpos":{"x":2,"y":13}},{"tpos":{"x":3,"y":3},"gpos":{"x":3,"y":13}},{"tpos":{"x":3,"y":3},"gpos":{"x":4,"y":13}},{"tpos":{"x":3,"y":3},"gpos":{"x":5,"y":13}},{"tpos":{"x":5,"y":3},"gpos":{"x":6,"y":13}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":7,"y":13}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":8,"y":13}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":9,"y":13}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":10,"y":13}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":11,"y":13}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":12,"y":13}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":13,"y":13}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":14,"y":13}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":15,"y":13}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":16,"y":13}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":17,"y":13}},{"tpos":{"x":-1,"y":-1},"gpos":{"x":18,"y":13}},{"tpos":{"x":9,"y":0},"gpos":{"x":19,"y":13}}],[{"tpos":{"x":1,"y":4},"gpos":{"x":0,"y":14}},{"tpos":{"x":4,"y":4},"gpos":{"x":1,"y":14}},{"tpos":{"x":4,"y":4},"gpos":{"x":2,"y":14}},{"tpos":{"x":4,"y":4},"gpos":{"x":3,"y":14}},{"tpos":{"x":4,"y":4},"gpos":{"x":4,"y":14}},{"tpos":{"x":4,"y":4},"gpos":{"x":5,"y":14}},{"tpos":{"x":5,"y":4},"gpos":{"x":6,"y":14}},{"tpos":{"x":7,"y":2},"gpos":{"x":7,"y":14}},{"tpos":{"x":8,"y":2},"gpos":{"x":8,"y":14}},{"tpos":{"x":8,"y":2},"gpos":{"x":9,"y":14}},{"tpos":{"x":8,"y":2},"gpos":{"x":10,"y":14}},{"tpos":{"x":8,"y":2},"gpos":{"x":11,"y":14}},{"tpos":{"x":8,"y":2},"gpos":{"x":12,"y":14}},{"tpos":{"x":8,"y":2},"gpos":{"x":13,"y":14}},{"tpos":{"x":8,"y":2},"gpos":{"x":14,"y":14}},{"tpos":{"x":8,"y":2},"gpos":{"x":15,"y":14}},{"tpos":{"x":8,"y":2},"gpos":{"x":16,"y":14}},{"tpos":{"x":8,"y":2},"gpos":{"x":17,"y":14}},{"tpos":{"x":11,"y":2},"gpos":{"x":18,"y":14}},{"tpos":{"x":9,"y":4},"gpos":{"x":19,"y":14}}]]');

	this.monsters=[];
	this.breakables=[];
	this.blocks=[];
	this.crates=[];
	this.hovers=[];
	this.bullets=[];

	var tile_height=16;

	this.monsters.push(new gary_t(50,canvas_height-tile_height*6));
	this.monsters.push(new gary_mini_t(270,canvas_height-tile_height));
	this.monsters.push(new ribeye_t(140,canvas_height-tile_height));

	this.breakables.push(new breakable_t(canvas_width/2-tile_height*4,canvas_height-tile_height*6,new sprite_t('img/urn.png',4,true)));
	this.breakables.push(new breakable_t(canvas_width/2+tile_height*2,0,new sprite_t('img/urn.png',4,true)));
	this.breakables.push(new breakable_t(canvas_width/2+tile_height*6,canvas_height-tile_height,new sprite_t('img/urn.png',4,true)));

	this.player=new player_t(canvas_width/2+tile_height*2,0);

	this.hovers.push(new hover_t(canvas_width/2+tile_height*2,canvas_height-tile_height*3.5));
}

level_t.prototype.loop=function(simulation,dt)
{
	this.tile_maker.loop(simulation,dt,this);

	for(var ii=0;ii<this.monsters.length;++ii)
		this.monsters[ii].loop(simulation,dt,this);
	for(var ii=0;ii<this.bullets.length;++ii)
		this.bullets[ii].loop(simulation,dt,this);
	this.player.loop(simulation,dt,this);
	for(var ii=0;ii<this.crates.length;++ii)
		this.crates[ii].loop(simulation,dt,this);
	for(var ii=0;ii<this.breakables.length;++ii)
		this.breakables[ii].loop(simulation,dt,this);
	for(var ii=0;ii<this.hovers.length;++ii)
		this.hovers[ii].loop(simulation,dt,this);

	var new_bullets=[];
	var max_bullet_dist=1000;
	for(var ii=0;ii<this.bullets.length;++ii)
		if(this.bullets[ii].moved_dist<max_bullet_dist&&!this.bullets[ii].destroy)
			new_bullets.push(this.bullets[ii]);
	this.bullets=new_bullets;
}

level_t.prototype.draw=function(simulation)
{
	for(var ii=0;ii<this.monsters.length;++ii)
		this.monsters[ii].draw(simulation);
	for(var ii=0;ii<this.bullets.length;++ii)
		if(!this.bullets[ii].exploded)
			this.bullets[ii].draw(simulation);
	this.player.draw(simulation);
	for(var ii=0;ii<this.crates.length;++ii)
		this.crates[ii].draw(simulation);
	for(var ii=0;ii<this.breakables.length;++ii)
		this.breakables[ii].draw(simulation);
	for(var ii=0;ii<this.hovers.length;++ii)
		this.hovers[ii].draw(simulation);
	this.tile_maker.draw(simulation);
	for(var ii=0;ii<this.bullets.length;++ii)
		if(this.bullets[ii].exploded)
			this.bullets[ii].draw(simulation);
}
